import{reactExports as e,jsxRuntimeExports as t,r as n,o as r}from"./vendor-lLSPkHbo.es.js";function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(t,a){function o(e){try{i(r.next(e))}catch(e){a(e)}}function l(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(e){e(r)})).then(o,l)}i((r=r.apply(e,[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let l=({className:e,name:n,value:r,setValue:a,handleKeyPress:o,styles:l,textAreaRef:i})=>{if("string"!=typeof r)return null;let s="\n"===r.slice(-1)?r+".":r;return t.jsxs("div",{style:{display:"grid"},children:[t.jsx("textarea",{id:`${n}_textarea`,ref:i,style:Object.assign({height:"auto",gridArea:"1 / 1 / 2 / 2",overflowY:"auto",whiteSpace:"pre-wrap"},l),rows:1,className:e,name:`${n}_textarea`,value:r,onChange:e=>a(e.target.value),autoFocus:!0,onFocus:e=>{r.length<40&&e.target.select()},onKeyDown:o}),t.jsx("span",{className:e,style:Object.assign({visibility:"hidden",height:"auto",gridArea:"1 / 1 / 2 / 2",color:"red",opacity:.9,whiteSpace:"pre-wrap",overflowY:"auto",border:"1px solid transparent"},l),children:s})]})},i=e=>null!==e&&"object"==typeof e,s=(e,t,n,r="")=>{if(!n&&!r)return!0;switch(e){case"collection":if(n){if(n(t,r))return!0;if(!c(r,t,n))return!1}if(!n&&r&&!c(r,t))return!1;break;case"value":if(n&&!n(t,r)||!n&&r&&!d(t,r))return!1}return!0},c=(e="",t,n=d)=>{let r=t.value;return Object.entries(r).some(([a,o])=>{let l=[...t.path,a],s=Object.assign(Object.assign({},t),{key:a,path:l,level:t.level+1,value:o,size:l.length,parentData:r});return i(o)?c(e,s,n):n(s,e)})},d=(e,t="")=>{let{value:n}=e;if(null===n&&"null".includes(t.toLowerCase()))return!0;switch(typeof n){case"string":return n.toLowerCase().includes(t.toLowerCase());case"number":return!!String(n).includes(t);case"boolean":return n?"true".includes(t.toLowerCase())||"1"===t:"false".includes(t.toLowerCase())||"0"===t;default:return!1}},u=({key:e,path:t},n="")=>!!d({value:e},n)||!!t.some(e=>d({value:e},n)),p=(e,t)=>(null!=t?t:"")+e.map(e=>""===e?"\0":e).join("."),g=e=>e.shiftKey?"Shift":e.metaKey?"Meta":e.ctrlKey?"Control":e.altKey?"Alt":void 0,h=(e,t,n)=>{let r=e.key,a=g(e);if(Array.isArray(t))return!!a&&t.includes(a);let{key:o,modifier:l}=t;return("stringLineBreak"!==n||"Enter"!==r||"Shift"!==a||"Enter"!==o||!(null==l?void 0:l.includes("Shift")))&&r===o&&(l===a||Array.isArray(l)&&l.includes(a))},m={key:"Enter"},y={confirm:m,cancel:{key:"Escape"},objectConfirm:Object.assign(Object.assign({},m),{modifier:["Meta","Shift","Control"]}),objectLineBreak:m,stringConfirm:m,stringLineBreak:Object.assign(Object.assign({},m),{modifier:["Shift"]}),numberConfirm:m,numberUp:{key:"ArrowUp"},numberDown:{key:"ArrowDown"},tabForward:{key:"Tab"},tabBack:{key:"Tab",modifier:"Shift"},booleanConfirm:m,booleanToggle:{key:" "},clipboardModifier:["Meta","Control"],collapseModifier:["Alt"]},f=(e,t,r="next",a)=>{let o=t.slice(0,t.length-1),l=t.slice(-1)[0];if(void 0===l)return null;let s=n(e,o),c=b(s);Array.isArray(s)||a(c,({key:e,value:t})=>[e,t]);let d=c.findIndex(e=>e.key===l),u=c[d+("next"===r?1:-1)];return u?i(u.value)?0===Object.keys(u.value).length?f(e,[...o,u.key],r,a):j(e,[...o,u.key],r,a):[...o,u.key]:0===o.length?null:f(e,o,r,a)},j=(e,t,r="next",a)=>{let o=n(e,t);if(!i(o))return t;let l=Array.isArray(o)?o.map((e,t)=>t):Object.keys(o);return a(l,e=>[e,o]),j(e,[...t,"next"===r?l[0]:l[l.length-1]],r,a)},b=e=>Array.isArray(e)?e.map((e,t)=>({index:t,value:e,key:t})):Object.entries(e).map(([e,t],n)=>({key:e,value:t,index:n})),v=(e,t)=>{var n,r,a,o;let l=e.current,i=null!==(n=null==l?void 0:l.selectionStart)&&void 0!==n?n:1/0,s=null!==(r=null==l?void 0:l.selectionEnd)&&void 0!==r?r:1/0,c=(null===(a=null==l?void 0:l.textContent)||void 0===a?void 0:a.slice(0,i))+t+(null===(o=null==l?void 0:l.textContent)||void 0===o?void 0:o.slice(s));return l.value=c,null==l||l.setSelectionRange(i+1,i+1),c},E=e=>{if(e!==x){if(Array.isArray(e))return e.map(e=>E(e));if(e&&"object"==typeof e)for(let t in e)e[t]=E(e[t]);return e}},x="__â€‹undefined__",w={displayName:"Default",fragments:{edit:"rgb(42, 161, 152)"},styles:{container:{backgroundColor:"#f6f6f6",fontFamily:"monospace"},collection:{},collectionInner:{},collectionElement:{},dropZone:{},property:"#292929",bracket:{color:"rgb(0, 43, 54)",fontWeight:"bold"},itemCount:{color:"rgba(0, 0, 0, 0.3)",fontStyle:"italic"},string:"rgb(203, 75, 22)",number:"rgb(38, 139, 210)",boolean:"green",null:{color:"rgb(220, 50, 47)",fontVariant:"small-caps",fontWeight:"bold"},input:["#292929"],inputHighlight:"#b3d8ff",error:{fontSize:"0.8em",color:"red",fontWeight:"bold"},iconCollection:"rgb(0, 43, 54)",iconEdit:"edit",iconDelete:"rgb(203, 75, 22)",iconAdd:"edit",iconCopy:"rgb(38, 139, 210)",iconOk:"green",iconCancel:"rgb(203, 75, 22)"}},D=e.createContext({getStyles:()=>({}),icons:{}}),C=({theme:e=w,icons:n={},docRoot:r,children:a})=>{let o=O(e,r);return t.jsx(D.Provider,{value:{getStyles:(e,t)=>"function"==typeof o[e]?o[e](t):o[e],icons:n},children:a})},k=()=>e.useContext(D),O=(e,t)=>{var n,r,a,o;let l={},i=(Array.isArray(e)?e:[e]).map(e=>N(e)?S({fragments:{},styles:e},l):S(e,l)),s=S(w,{});Object.keys(s).forEach(e=>{i.forEach(t=>{t[e]&&(s[e]=Object.assign(Object.assign({},s[e]),t[e]))})});let c=Object.assign({},s);return Object.entries(l).forEach(([e,t])=>{c[e]=n=>{let r=t(n)||{};return Object.assign(Object.assign({},s[e]),r)}}),"function"!=typeof(null==c?void 0:c.inputHighlight)&&(null===(n=null==c?void 0:c.inputHighlight)||void 0===n?void 0:n.backgroundColor)&&t.style.setProperty("--jer-highlight-color",null===(r=null==c?void 0:c.inputHighlight)||void 0===r?void 0:r.backgroundColor),"function"!=typeof(null==c?void 0:c.iconCopy)&&(null===(a=null==c?void 0:c.iconCopy)||void 0===a?void 0:a.color)&&t.style.setProperty("--jer-icon-copy-color",null===(o=null==c?void 0:c.iconCopy)||void 0===o?void 0:o.color),c},S=(e,t)=>{let{fragments:n,styles:r}=e,a={};return Object.entries(r).forEach(([e,r])=>{let o=(Array.isArray(r)?r:[r]).reduce((r,a)=>{var o,l;if("function"==typeof a)return t[e]=a,Object.assign({},r);if("string"==typeof a){let t=null!==(o=null==n?void 0:n[a])&&void 0!==o?o:a;return"string"==typeof t?Object.assign(Object.assign({},r),{[null!==(l=T[e])&&void 0!==l?l:"color"]:t}):Object.assign(Object.assign({},r),t)}return Object.assign(Object.assign({},r),a)},{});a[e]=o}),a},N=e=>!("styles"in e),T={container:"backgroundColor",collection:"backgroundColor",collectionInner:"backgroundColor",collectionElement:"backgroundColor",dropZone:"borderColor",inputHighlight:"backgroundColor"},A=e.createContext(null),R=({children:n,onEditEvent:r,onCollapse:a})=>{let[o,l]=e.useState(null),[i,s]=e.useState(null),[c,d]=e.useState(null),[u,g]=e.useState({path:null,pathString:null}),h=e.useRef(null),m=e.useRef("next"),y=e.useRef(null);return t.jsx(A.Provider,{value:{collapseState:o,setCollapseState:e=>{l(e),a&&null!==e&&(Array.isArray(e)?e.forEach(e=>a(e)):a(e)),null!==e&&setTimeout(()=>l(null),2e3)},getMatchingCollapseState:e=>{if(Array.isArray(o)){for(let t of o)if(P(e,t))return t;return null}return P(e,o)?o:null},currentlyEditingElement:i,setCurrentlyEditingElement:(e,t)=>{let n="string"==typeof e||null===e?e:p(e,"key"===t?"key_":void 0);null!==i&&null!==n&&null!==h.current&&h.current(),s(n),r&&r(e,"key"===t),h.current="function"==typeof t?t:null},areChildrenBeingEdited:e=>null!==i&&i.includes(e),previouslyEditedElement:y.current,setPreviouslyEditedElement:e=>{y.current=e},tabDirection:m.current,setTabDirection:e=>{m.current=e},previousValue:c,setPreviousValue:d,dragSource:u,setDragSource:g},children:n})},K=()=>{let t=e.useContext(A);if(!t)throw Error("Missing Context Provider");return t},P=(e,t)=>{if(null===t)return!1;if(!t.includeChildren)return t.path.every((t,n)=>e[n]===t)&&t.path.length===e.length;for(let[n,r]of t.path.entries())if(r!==e[n])return!1;return!0},V="**INVALID_FUNCTION**",M=({nodeData:n,showStringQuotes:r=!0,stringTruncate:a=200,pathString:o,canEdit:l,setIsEditing:i,styles:s,translate:c,value:d,TextWrapper:u=({children:e})=>e})=>{let p=null!=d?d:n.value,[g,h]=e.useState(!1),m=r?'"':"",y=p.length>a,f=()=>{l?i(!0):h(!g)};return t.jsxs("div",{id:`${o}_display`,onDoubleClick:f,onClick:e=>{(e.getModifierState("Control")||e.getModifierState("Meta"))&&f()},className:"jer-value-string",style:s,children:[m,y?t.jsxs(t.Fragment,g?{children:[t.jsx(u,{children:t.jsxs("span",{children:[p,m]})}),t.jsxs("span",{className:"jer-string-expansion jer-show-less",onClick:()=>h(!1),children:[" ",c("SHOW_LESS",n)]})]}:{children:[t.jsxs(u,{children:[t.jsx("span",{children:p.slice(0,a-2).trimEnd()})," "]}),t.jsx("span",{className:"jer-string-expansion jer-ellipsis",onClick:()=>h(!0),children:"..."}),m]}):t.jsx(u,{children:`${p}${m}`})]})},_=({styles:n,pathString:r,value:a,setValue:o,handleEdit:i,handleKeyboard:s,keyboardCommon:c})=>{let d=e.useRef(null);return t.jsx(l,{className:"jer-input-text",textAreaRef:d,name:r,value:a,setValue:o,handleKeyPress:e=>{s(e,Object.assign({stringConfirm:i,stringLineBreak:()=>{o(v(d,"\n"))}},c))},styles:n})},F=e=>{var{isEditing:n,path:r,enumType:o}=e,l=a(e,["isEditing","path","enumType"]);let{getStyles:i}=k(),s=p(r),{value:c,setValue:d,nodeData:u,handleEdit:g,handleKeyboard:h,keyboardCommon:m}=l;return n&&o?t.jsxs("div",{className:"jer-select jer-select-enums",children:[t.jsx("select",{name:`${s}-value-select`,className:"jer-select-inner",onChange:e=>d(e.target.value),value:c,autoFocus:!0,onKeyDown:e=>{h(e,Object.assign({stringConfirm:g},m))},children:o.values.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("span",{className:"focus"})]}):n?t.jsx(_,Object.assign({styles:i("input",u),pathString:s},l,{setValue:l.setValue})):t.jsx(M,Object.assign({pathString:s,styles:i("string",u)},l))},I=({value:e,setValue:n,isEditing:r,path:a,setIsEditing:o,handleEdit:l,nodeData:i,handleKeyboard:s,keyboardCommon:c})=>{let{getStyles:d}=k();return r?t.jsx("input",{className:"jer-input-number",type:"text",name:p(a),value:e,onChange:e=>n(e.target.value.replace(/[^0-9.-]/g,"")),autoFocus:!0,onFocus:e=>setTimeout(()=>e.target.select(),10),onKeyDown:t=>s(t,Object.assign({numberConfirm:l,numberUp:()=>n(Number(e)+1),numberDown:()=>n(Number(e)-1)},c)),style:Object.assign({width:String(e).length/1.5+2+"em"},d("input",i))}):t.jsx("span",{onDoubleClick:()=>o(!0),className:"jer-value-number",style:d("number",i),children:e})},z=({value:e,setValue:n,isEditing:r,path:a,setIsEditing:o,handleEdit:l,nodeData:i,handleKeyboard:s,keyboardCommon:c})=>{let{getStyles:d}=k();return"boolean"!=typeof e?null:r?t.jsx("input",{className:"jer-input-boolean",type:"checkbox",name:p(a),checked:e,onChange:()=>n(!e),onKeyDown:t=>{" "===t.key&&t.preventDefault(),s(t,Object.assign({booleanConfirm:l,booleanToggle:()=>n(!e)},c))},autoFocus:!0}):t.jsx("span",{onDoubleClick:()=>o(!0),className:"jer-value-boolean",style:d("boolean",i),children:String(e)})},L=(t,n)=>{let r=e.useRef(void 0),a=e.useRef(n);e.useEffect(()=>{a.current=n},[n]);let o=e=>{a.current(e)};e.useEffect(()=>{if(window.clearTimeout(r.current),t)return r.current=window.setTimeout(()=>{window.addEventListener("keydown",o)},100),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",o)}},[t])},B=({value:e,isEditing:n,setIsEditing:r,handleEdit:a,nodeData:o,handleKeyboard:l,keyboardCommon:i})=>{let{getStyles:s}=k();return L(n,e=>l(e,Object.assign({confirm:a},i))),t.jsx("div",{onDoubleClick:()=>r(!0),className:"jer-value-null",style:s("null",o),children:String(e)})},W=({value:e})=>{let n="Error!";switch(typeof e){case"string":e===V&&(n="Function");break;case"undefined":n="Undefined";break;case"symbol":n="Symbol"}return t.jsx("span",{className:"jer-value-invalid",children:n})},H=({size:e,style:n,className:r})=>t.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,children:[t.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"}),t.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"})]}),U=({size:e,style:n,className:r})=>t.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,transform:"translate(0, 0.5)",children:[t.jsx("path",{d:"M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),t.jsx("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]}),Y=({size:e,style:n,className:r})=>t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,children:t.jsx("path",{d:"M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})}),$=({size:e,style:n,className:r})=>t.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:r,style:n,children:[t.jsx("path",{d:"M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z"}),t.jsx("path",{d:"M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11"}),t.jsx("path",{d:"M15 10l-4 4 4 4"})]}),G=({size:e,style:n,className:r})=>t.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:e,height:e,className:r,style:n,children:[t.jsx("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),t.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),Z=({size:e,style:n,className:r})=>t.jsx("svg",{baseProfile:"tiny",viewBox:"0 0 24 24",fill:"currentColor",width:e,height:e,className:r,style:n,children:t.jsx("path",{d:"M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z"})}),J=({size:e,style:n,className:r})=>t.jsx("svg",{viewBox:"0 0 512 512",fill:"currentColor",width:e,height:e,className:r,style:n,children:t.jsx("path",{d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"})}),X=({name:e,nodeData:n})=>{var r,a,o,l,i,s,c;let{getStyles:d,icons:u}=k(),p={size:"1.4em",className:"jer-icon"};switch(e){case"add":return null!==(r=null==u?void 0:u.add)&&void 0!==r?r:t.jsx(H,Object.assign({},p,{style:d("iconAdd",n)}));case"edit":return null!==(a=null==u?void 0:u.edit)&&void 0!==a?a:t.jsx(U,Object.assign({},p,{style:d("iconEdit",n)}));case"delete":return null!==(o=null==u?void 0:u.delete)&&void 0!==o?o:t.jsx(Y,Object.assign({},p,{style:d("iconDelete",n),size:"1.45em"}));case"copy":return null!==(l=null==u?void 0:u.copy)&&void 0!==l?l:t.jsx($,Object.assign({},p,{style:d("iconCopy",n),size:"1.2em"}));case"ok":return null!==(i=null==u?void 0:u.ok)&&void 0!==i?i:t.jsx(G,Object.assign({},p,{style:Object.assign({fontSize:"90%"},d("iconOk",n))}));case"cancel":return null!==(s=null==u?void 0:u.cancel)&&void 0!==s?s:t.jsx(Z,Object.assign({},p,{style:Object.assign({fontSize:"130%"},d("iconCancel",n))}));case"chevron":return null!==(c=null==u?void 0:u.chevron)&&void 0!==c?c:t.jsx(J,{size:"1em",style:d("iconCollection",n)});default:return t.jsx(t.Fragment,{})}},Q=({startEdit:r,handleDelete:a,handleAdd:o,enableClipboard:l,type:i,customButtons:s,nodeData:c,translate:d,keyboardControls:u,handleKeyboard:p,editConfirmRef:h,getNewKeyOptions:m,jsonStringify:y})=>{let{getStyles:f}=k(),j=d("KEY_NEW",c),[b,v]=e.useState(j),[E,x]=e.useState(!1),{key:w,path:D,value:C}=c,O=Array.isArray(E),S=e=>{var t;if(!e)return void x(!1);let r=Object.keys(n(c.fullData,D)),a=m?null===(t=m(c))||void 0===t?void 0:t.filter(e=>!r.includes(e)):null;a&&v(""),x(null==a||a)};return t.jsxs("div",{className:"jer-edit-buttons",style:{opacity:E?1:void 0},onClick:e=>e.stopPropagation(),children:[l&&t.jsx("div",{onClick:e=>{var t;e.stopPropagation();let n,r,a="value",o="",i=null;if(l){let s=g(e);if(s&&u.clipboardModifier.includes(s)?(o=n=ee(D),a="path"):o="object"==typeof(n=C)?y(C):String(n),!navigator.clipboard)return void("function"==typeof l&&l({success:!1,value:n,stringValue:o,path:D,key:w,type:a,errorMessage:"Can't access clipboard API"}));null===(t=navigator.clipboard)||void 0===t||t.writeText(o).then(()=>r=!0).catch(e=>{r=!1,i=e.message}).finally(()=>{"function"==typeof l&&l({success:r,errorMessage:i,value:n,stringValue:o,path:D,key:w,type:a})})}},className:"jer-copy-pulse",children:t.jsx(X,{name:"copy",nodeData:c})}),r&&t.jsx("div",{onClick:r,children:t.jsx(X,{name:"edit",nodeData:c})}),a&&t.jsx("div",{onClick:a,children:t.jsx(X,{name:"delete",nodeData:c})}),o&&t.jsx("div",{onClick:()=>{"object"===i?S(!0):o("")},children:t.jsx(X,{name:"add",nodeData:c})}),null==s?void 0:s.map(({Element:e,onClick:n},r)=>t.jsx("div",{onClick:e=>n&&n(c,e),children:t.jsx(e,{nodeData:c})},r)),E&&o&&"object"===i&&t.jsxs(t.Fragment,{children:[O?t.jsxs("div",{className:"jer-select jer-select-keys",children:[t.jsxs("select",{name:"new-key-select",className:"jer-select-inner",onChange:e=>{o(e.target.value),S(!1)},defaultValue:"",autoFocus:!0,onKeyDown:e=>{p(e,{cancel:()=>S(!1)})},children:[t.jsx("option",{value:"",disabled:!0,children:d(E.length>0?"KEY_SELECT":"NO_KEY_OPTIONS",c)}),E.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("span",{className:"focus"})]}):t.jsx("input",{className:"jer-input-new-key",type:"text",name:"new-object-key",value:b,onChange:e=>v(e.target.value),autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>{p(e,{stringConfirm:()=>{o&&(S(!1),o(b),v(j))},cancel:()=>{S(!1),v(j)}})},style:f("input",c)}),t.jsx(q,{onOk:()=>{O&&!b||(S(!1),o(b))},onCancel:()=>{S(!1)},nodeData:c,editConfirmRef:h,hideOk:O})]})]})},q=({onOk:e,onCancel:n,nodeData:r,editConfirmRef:a,hideOk:o=!1})=>t.jsxs("div",{className:"jer-confirm-buttons",children:[!o&&t.jsx("div",{onClick:e,ref:a,children:t.jsx(X,{name:"ok",nodeData:r})}),t.jsx("div",{onClick:n,children:t.jsx(X,{name:"cancel",nodeData:r})})]}),ee=e=>e.reduce((e,t)=>"number"==typeof t?`${e}[${t}]`:""===e?t:`${e}.${t}`,""),et=["string","number","boolean","null","object","array"],en=({props:t,collapsed:n})=>{let{data:r,nodeData:a,parentData:o,onEdit:l,onError:i,showErrorMessages:s,restrictEditFilter:c,restrictDeleteFilter:d,restrictAddFilter:u,restrictDragFilter:g,translate:h,errorMessageTimeout:m}=t,{currentlyEditingElement:y,setCurrentlyEditingElement:f}=K(),[j,b]=e.useState(null),v=Object.assign(Object.assign({},a),{collapsed:n}),{path:E,key:x,size:w}=v,D=p(E),C=!c(v),k=!d(v),O=!u(v),S=!g(v)&&k&&null===y,N=e=>{s&&(b(e),setTimeout(()=>b(null),m)),console.warn("Error",e)},T=e.useCallback((e,t)=>{N(e.message),i&&i({currentData:v.fullData,errorValue:t,currentValue:r,name:x,path:E,error:e})},[i,s]),A=y===`key_${D}`,R="number"==typeof E.slice(-1)[0],P=""===x&&E.length>0?h("EMPTY_STRING",v):null;return{pathString:D,nodeData:v,path:E,name:x,size:w,canEdit:C,canDelete:k,canAdd:O,canDrag:S,error:j,showError:N,onError:T,setError:b,handleEditKey:e=>{if(f(null),x===e||!o)return;let t=E.slice(0,-1);if(Object.keys(o).includes(e))return void T({code:"KEY_EXISTS",message:h("ERROR_KEY_EXISTS",v)},e);l(Object.fromEntries(Object.entries(o).map(([t,n])=>t===x?[e,n]:[t,n])),t).then(t=>{t&&T({code:"UPDATE_ERROR",message:t},e)})},derivedValues:{isEditing:y===D,isEditingKey:A,isArray:R,canEditKey:null!==o&&C&&O&&k&&!R},emptyStringKey:P}},er=({canDrag:n,canDragOnto:r,path:a,nodeData:o,onMove:l,onError:i,translate:s})=>{let{getStyles:c}=k(),{dragSource:d,setDragSource:u}=K(),[g,h]=e.useState(!1),m=p(a),y=e.useMemo(()=>n?{onDragStart:e=>{e.stopPropagation(),u({path:a,pathString:m})},onDragEnd:e=>{e.stopPropagation(),u({path:null,pathString:null})}}:{},[n,m]),f=e.useMemo(()=>e=>r?{onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDrop:t=>{t.stopPropagation(),b(e),u({path:null,pathString:null}),h(!1)},onDragEnter:t=>{var n;t.stopPropagation(),m.startsWith(null!==(n=d.pathString)&&void 0!==n?n:"")||h(e)},onDragExit:e=>{e.stopPropagation(),h(!1)}}:{},[d,r,m]),j=e.useMemo(()=>r&&null!==d.pathString?t.jsx("div",Object.assign({className:"jer-drop-target-bottom",style:{height:"50%",position:"absolute",width:"100%",top:"50%",zIndex:a.length}},f("below"))):null,[d,r,a.length]),b=e=>{var t,n;let r=null===(t=d.path)||void 0===t?void 0:t.slice(-1)[0],c=null===(n=d.path)||void 0===n?void 0:n.slice(0,-1).join("."),u=a.slice(0,-1).join(""),{parentData:p}=o;"string"==typeof r&&p&&!Array.isArray(p)&&Object.keys(p).includes(r)&&r in p&&c!==u?i({code:"KEY_EXISTS",message:s("ERROR_KEY_EXISTS",o)},r):l(d.path,a,e).then(e=>{e&&i({code:"UPDATE_ERROR",message:e},o.value)})};return{dragSourceProps:y,getDropTargetProps:f,BottomDropTarget:j,DropTargetPadding:({position:e,nodeData:n})=>g===e?t.jsx("div",{className:"jer-drag-n-drop-padding",style:c("dropZone",n)}):null,handleDrop:b}},ea=(e,t,n,r)=>{var a,o,l;if(!t.current)return 0;let i=parseInt(null!==(a=getComputedStyle(n.current).getPropertyValue("line-height"))&&void 0!==a?a:"16px"),s=(null!==(l=null===(o=t.current)||void 0===o?void 0:o.offsetWidth)&&void 0!==l?l:0)/(.5*i);return Math.min(r(e).replace(/\\n/g,"\n").split("\n").map(e=>Math.ceil(e.length/s)).reduce((e,t)=>e+t,0)*i+30,window.innerHeight-50)},eo=({isEditingKey:e,canEditKey:n,pathString:r,path:a,name:o,handleKeyboard:l,handleEditKey:i,handleCancel:s,handleClick:c,keyValueArray:d,styles:u,getNextOrPrevious:p,emptyStringKey:g})=>{let{setCurrentlyEditingElement:h}=K();return e?t.jsx("input",{className:"jer-input-text jer-key-edit",type:"text",name:r,defaultValue:o,autoFocus:!0,onFocus:e=>e.target.select(),onKeyDown:e=>l(e,{stringConfirm:()=>i(e.target.value),cancel:s,tabForward:()=>{if(i(e.target.value),d){let e=null==d?void 0:d[0][0];h(e?[...a,e]:p("next"))}else h(a)},tabBack:()=>{i(e.target.value),h(p("prev"))}}),style:{width:String(o).length/1.5+.5+"em"}}):t.jsxs("span",{className:"jer-key-text",style:Object.assign(Object.assign({},u),{minWidth:`${Math.min(String(o).length+1,5)}ch`,flexShrink:o.length>10?1:0}),onDoubleClick:()=>n&&h(a,"key"),onClick:c,children:[g?t.jsx("span",{className:"jer-empty-string",children:g}):o,""!==o||g?t.jsx("span",{className:"jer-key-colon",children:":"}):null]})},el=n=>{let{data:r,parentData:a,onEdit:o,onDelete:l,onChange:i,onMove:c,enableClipboard:d,canDragOnto:u,restrictTypeSelection:p,searchFilter:g,searchText:h,showLabel:m,stringTruncate:y,showStringQuotes:j,indent:b,translate:v,customNodeDefinitions:E,customNodeData:x,handleKeyboard:w,keyboardControls:D,sort:C,editConfirmRef:O,jsonStringify:S}=n,{getStyles:N}=k(),{setCurrentlyEditingElement:T,setCollapseState:A,previouslyEditedElement:R,setPreviouslyEditedElement:P,tabDirection:M,setTabDirection:_,previousValue:F,setPreviousValue:I}=K(),[z,L]=e.useState("function"==typeof r?V:r),{pathString:B,nodeData:W,path:H,name:U,canEdit:Y,canDelete:$,canDrag:G,error:Z,onError:J,handleEditKey:X,emptyStringKey:ee,derivedValues:ea}=en({props:n}),{dragSourceProps:el,getDropTargetProps:ed,BottomDropTarget:eu,DropTargetPadding:ep}=er({canDrag:G,canDragOnto:u,path:H,nodeData:W,onMove:c,onError:J,translate:v}),[eg,eh]=e.useState(ei(r,x)),em=e.useCallback(e=>{if(!i)return void L(e);L(i({currentData:W.fullData,newValue:e,currentValue:z,name:U,path:H}))},[i]);e.useEffect(()=>{L("function"==typeof r?V:r),eh(ei(r,x))},[r,Z]);let{CustomNode:ey,customNodeProps:ef,hideKey:ej,showEditTools:eb=!0,showOnEdit:ev,showOnView:eE,passOriginalNode:ex}=x,ew=[...et,...E.filter(({showInTypesSelector:e=!1,name:t})=>e&&!!t).map(({name:e})=>e)],eD=e.useMemo(()=>{if("boolean"==typeof p)return p?[]:ew;if(Array.isArray(p))return p;let e=p(W);return"boolean"==typeof e?e?[]:ew:e},[W,p]),[eC,ek]=e.useState(((e,t)=>{var n;if("string"!=typeof e)return null;let r=t.filter(t=>t instanceof Object&&t.enum&&t.values.includes(e)&&t.matchPriority);return r.sort((e,t)=>{var n,r;return(null!==(n=t.matchPriority)&&void 0!==n?n:0)-(null!==(r=e.matchPriority)&&void 0!==r?r:0)}),null!==(n=r[0])&&void 0!==n?n:null})(z,eD)),{isEditing:eO}=ea,eS=s("value",W,g,h);if(!eO||eS&&Y||T(f(W.fullData,H,M,C)||R),!eS)return null;let eN=e=>{let t;if(T(null),I(null),void 0===e||e&&"object"==typeof e&&"type"in e&&"target"in e&&"preventDefault"in e&&"function"==typeof e.preventDefault)switch(eg){case"object":t={[v("DEFAULT_NEW_KEY",W)]:z};break;case"array":t=null!=z?z:[];break;case"number":{let e=Number(z);t=isNaN(e)?0:e;break}default:t=z}else t=e;o(t,H).then(e=>{e&&J({code:"UPDATE_ERROR",message:e},t)})},eT=()=>{T(null),null===F?(L(r),I(null)):o(F,H)},{isEditingKey:eA,canEditKey:eR}=ea,eK=!eO&&Z,eP=eO&&eD.length>1,eV=("invalid"!==eg||ey)&&!Z&&eb,eM=ey&&(eO&&ev||!eO&&eE),e_={value:z,parentData:a,setValue:em,isEditing:eO,canEdit:Y,setIsEditing:Y?()=>T(H):()=>{},handleEdit:eN,handleCancel:eT,path:H,stringTruncate:y,showStringQuotes:j,nodeData:W,enumType:eC,translate:v,handleKeyboard:w,keyboardCommon:{cancel:eT,tabForward:()=>{_("next"),P(B);let e=f(W.fullData,H,"next",C);e&&(eN(),T(e))},tabBack:()=>{_("prev"),P(B);let e=f(W.fullData,H,"prev",C);e&&(eN(),T(e))}}},eF={canEditKey:eR,isEditingKey:eA,pathString:B,path:H,name:U,handleKeyboard:w,handleEditKey:X,handleCancel:eT,styles:N("property",W),getNextOrPrevious:e=>f(W.fullData,H,e,C),emptyStringKey:ee},eI=eM?t.jsx(ey,Object.assign({},n,{value:z,customNodeProps:ef,setValue:em,handleEdit:eN,handleCancel:eT,handleKeyPress:e=>w(e,{stringConfirm:eN,cancel:eT}),isEditing:eO,setIsEditing:()=>T(H),getStyles:N,originalNode:ex?es(r,e_):void 0,originalNodeKey:ex?t.jsx(eo,Object.assign({},eF)):void 0,canEdit:Y,keyboardCommon:e_.keyboardCommon,onError:J})):es(r,e_);return t.jsxs("div",Object.assign({className:"jer-component jer-value-component",style:{marginLeft:b/2+"em",position:"relative"},draggable:G},el,ed("above"),{children:[eu,t.jsx(ep,{position:"above",nodeData:W}),t.jsxs("div",{className:"jer-value-main-row",style:{flexWrap:U.length>10?"wrap":"nowrap"},children:[m&&!ej&&t.jsx(eo,Object.assign({},eF)),t.jsxs("div",{className:"jer-value-and-buttons",children:[t.jsx("div",{className:"jer-input-component",children:eI}),eO?t.jsx(q,{onOk:eN,onCancel:eT,nodeData:W,editConfirmRef:O}):eV&&t.jsx(Q,{startEdit:Y?()=>{I(F),T(H,eT)}:void 0,handleDelete:$?()=>{l(z,H).then(e=>{e&&J({code:"DELETE_ERROR",message:e},z)})}:void 0,enableClipboard:d,translate:v,customButtons:n.customButtons,nodeData:W,handleKeyboard:w,keyboardControls:D,editConfirmRef:O,jsonStringify:S}),eP&&t.jsxs("div",{className:"jer-select jer-select-types",children:[t.jsx("select",{name:`${U}-type-select`,className:"jer-select-inner",onChange:e=>(e=>{let t=E.find(t=>t.name===e);if(t)return o(t.defaultValue,H),eh(e),ek(null),T(null),void A({path:H,collapsed:!1,includeChildren:!1});let n=eD.find(t=>t instanceof Object&&t.enum===e);if(n)return"string"==typeof z&&n.values.includes(z)||o(n.values[0],H).then(e=>{e&&(J({code:"UPDATE_ERROR",message:e},r),T(null))}),void ek(n);let r=ec(z,e,v("DEFAULT_NEW_KEY",W),(null==x?void 0:x.CustomNode)?v("DEFAULT_STRING",W):void 0);o(r,H).then(e=>{e?(J({code:"UPDATE_ERROR",message:e},r),T(null)):ek(null)})})(e.target.value),value:eC?eC.enum:eg,children:eD.map(e=>e instanceof Object&&"enum"in e?t.jsx("option",{value:e.enum,children:e.enum},e.enum):t.jsx("option",{value:e,children:e},e))}),t.jsx("span",{className:"focus"})]}),eK&&t.jsx("span",{className:"jer-error-slug",style:N("error",W),children:Z})]})]}),t.jsx(ep,{position:"below",nodeData:W})]}))},ei=(e,t)=>(null==t?void 0:t.CustomNode)&&(null==t?void 0:t.name)&&t.showInTypesSelector?t.name:"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":null===e?"null":"invalid",es=(e,n)=>{let r=ei(e),{value:a}=n;switch(r){case"string":return t.jsx(F,Object.assign({},n,{value:a}));case"number":return t.jsx(I,Object.assign({},n,{value:a}));case"boolean":return t.jsx(z,Object.assign({},n,{value:a}));case"null":return t.jsx(B,Object.assign({},n));default:return t.jsx(W,Object.assign({},n))}},ec=(e,t,n,r)=>{switch(t){case"string":return null!=r?r:String(e);case"number":{let t=Number(e);return isNaN(t)?0:t}case"boolean":return!!e;case"null":return null;case"object":return{[n]:e};case"array":return[e];default:return String(e)}},ed=(e=[],t)=>{let n=e.filter(({condition:e})=>e(t));if(0===n.length)return{};let r=n[0],{element:o,wrapperElement:l,customNodeProps:i,wrapperProps:s,hideKey:c=!1,showEditTools:d=!0,showOnEdit:u=!1,showOnView:p=!0,showCollectionWrapper:g=!0}=r;return Object.assign({CustomNode:o,CustomWrapper:l,customNodeProps:i,wrapperProps:s,hideKey:c,showEditTools:d,showOnEdit:u,showOnView:p,showCollectionWrapper:g},a(r,["element","wrapperElement","customNodeProps","wrapperProps","hideKey","showEditTools","showOnEdit","showOnView","showCollectionWrapper"]))},eu=n=>{let{getStyles:r}=k(),{collapseState:a,setCollapseState:c,getMatchingCollapseState:d,currentlyEditingElement:u,setCurrentlyEditingElement:p,areChildrenBeingEdited:h,previousValue:m,setPreviousValue:y}=K(),{mainContainerRef:j,data:b,nodeData:E,parentData:x,showCollectionCount:w,onEdit:D,onAdd:C,onDelete:O,canDragOnto:S,collapseFilter:N,collapseAnimationTime:T,onMove:A,enableClipboard:R,searchFilter:P,searchText:V,indent:M,sort:_,showArrayIndices:F,defaultValue:I,newKeyOptions:z,translate:L,customNodeDefinitions:B,customNodeData:W,jsonParse:H,jsonStringify:U,TextEditor:Y,keyboardControls:$,handleKeyboard:G,insertAtTop:Z,onCollapse:J,editConfirmRef:ee,collapseClickZones:et}=n,[ei,es]=e.useState(U(b)),ec=N(E),{contentRef:ep,isAnimating:eg,maxHeight:eh,collapsed:em,animateCollapse:ey,cssTransitionValue:ef}=((t,n,r,a,o)=>{let[l,i]=e.useState(r?0:void 0),[s,c]=e.useState(r),d=e.useRef(!1),u=e.useRef(null),p=e.useRef(0),g=e.useRef(0),h=n/1e3+"s",m=e.useCallback(e=>{var r,l;if(s!==e){switch(window.clearTimeout(g.current),d.current=!0,e){case!0:{let e=null!==(l=null===(r=u.current)||void 0===r?void 0:r.offsetHeight)&&void 0!==l?l:0;p.current=e,i(e),setTimeout(()=>{i(0)},5);break}case!1:i(p.current||ea(t,u,a,o))}c(!s),g.current=window.setTimeout(()=>{d.current=!1,e||i(void 0)},n)}},[n,s,t,a,o]);return{contentRef:u,isAnimating:d.current,animateCollapse:m,maxHeight:l,collapsed:s,cssTransitionValue:h}})(b,T,ec,j,U),{pathString:ej,nodeData:eb,path:ev,name:eE,size:ex,canEdit:ew,canDelete:eD,canAdd:eC,canDrag:ek,error:eO,setError:eS,onError:eN,handleEditKey:eT,emptyStringKey:eA,derivedValues:eR}=en({props:n,collapsed:em}),{dragSourceProps:eK,getDropTargetProps:eP,BottomDropTarget:eV,DropTargetPadding:eM}=er({canDrag:ek,canDragOnto:S,path:ev,nodeData:eb,onMove:A,onError:eN,translate:L}),e_=e.useRef(!ec),{isEditing:eF,isEditingKey:eI,isArray:ez,canEditKey:eL}=eR;e.useEffect(()=>{es(U(b))},[b,U]),e.useEffect(()=>{let e=N(eb)&&!eF;e_.current=!e,ey(e)},[N]),e.useEffect(()=>{if(null!==a){let e=d(ev);e&&(e_.current=!0,ey(e.collapsed))}},[a]);let eB=e.useRef(null),eW=e.useCallback((e,t)=>{if("function"!=typeof I)return I;let n=I(e,t);return void 0!==n?n:null},[I]),eH=e.useCallback(e=>z?"function"!=typeof z?z:z(e):null,[z]),{CustomNode:eU,customNodeProps:eY,CustomWrapper:e$,wrapperProps:eG={},hideKey:eZ,showEditTools:eJ=!0,showOnEdit:eX,showOnView:eQ,showCollectionWrapper:eq=!0}=W,e0=h(ej);if(e0&&em&&ey(!1),!(s("collection",eb,P,V)||0===eb.level)&&!e0)return null;let e1=Array.isArray(b)?"array":"object",e2="array"===e1?{open:"[",close:"]"}:{open:"{",close:"}"},e5=e=>{"Tab"!==e.key||e.getModifierState("Shift")?G(e,{objectConfirm:e8,cancel:e9}):(e.preventDefault(),es(v(eB,"	")))},e4=e=>{e.stopPropagation();let t=g(e);if(t&&$.collapseModifier.includes(t))return e_.current=!0,void c({collapsed:!em,path:ev,includeChildren:!0});u&&u.includes(ej)||(e_.current=!0,c(null),J&&J({path:ev,collapsed:!em,includeChildren:!1}),ey(!em))},e8=()=>{try{let e=H(ei);if(p(null),y(null),eS(null),U(e)===U(b))return;D(e,ev).then(t=>{t&&eN({code:"UPDATE_ERROR",message:t},e)})}catch(e){eN({code:"INVALID_JSON",message:L("ERROR_INVALID_JSON",eb)},ei)}},e3=ev.length>0?()=>{O(b,ev).then(e=>{e&&eN({code:"DELETE_ERROR",message:e},b)})}:void 0,e9=()=>{p(null),null===m?(eS(null),es(U(b)),y(null)):D(m,ev)},e6="when-closed"===w?em:w,e7=!eF&&eJ,te=(F||!ez)&&!eZ&&void 0!==eE,tt=eU&&(eF&&eX||!eF&&eQ),tn=Object.entries(b).map(([e,t])=>["array"===e1?Number(e):e,t]);"object"===e1&&_(tn,e=>e);let tr=e_.current?eF?t.jsxs("div",{className:"jer-collection-text-edit",children:[Y?t.jsx(Y,{value:ei,onChange:es,onKeyDown:e=>G(e,{objectConfirm:e8,cancel:e9})}):t.jsx(l,{textAreaRef:eB,className:"jer-collection-text-area",name:ej,value:ei,setValue:es,handleKeyPress:e5,styles:r("input",eb)}),t.jsx("div",{className:"jer-collection-input-button-row",children:t.jsx(q,{onOk:e8,onCancel:e9,nodeData:eb,editConfirmRef:ee})})]}):tn.map(([e,a],o)=>{let l={key:e,value:a,path:[...ev,e],level:ev.length+1,index:o,size:i(a)?Object.keys(a).length:null,parentData:b,fullData:eb.fullData},s=ed(B,l);return t.jsx("div",{className:"jer-collection-element",style:r("collectionElement",l),children:!i(a)||(null==s?void 0:s.renderCollectionAsValue)?t.jsx(el,Object.assign({},n,{data:a,parentData:b,nodeData:l,canDragOnto:ew,showLabel:"object"===e1||F,customNodeData:s}),e):t.jsx(eu,Object.assign({},n,{data:a,parentData:b,nodeData:l,showCollectionCount:w,canDragOnto:ew,customNodeData:s}),e)},e)}):null,ta=!!eq&&em&&!e0;ta||(e_.current=!0);let to=Object.assign(Object.assign({},n),{data:b,value:b,parentData:x,nodeData:eb,setValue:e=>o(void 0,void 0,void 0,function*(){return yield D(e,ev)}),handleEdit:e8,handleCancel:e9,handleKeyPress:e5,isEditing:eF,setIsEditing:()=>p(ev),getStyles:r,canDragOnto:ew,canEdit:ew,keyboardCommon:{},onError:eN}),tl=tt?t.jsx(eU,Object.assign({customNodeProps:eY},to,{children:tr})):tr,ti=e7&&t.jsx(Q,{startEdit:ew?()=>{e_.current=!0,y(null),p(ev)}:void 0,handleAdd:eC?e=>{ey(!1);let t=eW(eb,e);"array"===e1?C(t,[...ev,Z.array?0:b.length],Z.array?{insert:!0}:{}).then(e=>{e&&eN({code:"ADD_ERROR",message:e},t)}):e in b?eN({code:"KEY_EXISTS",message:L("ERROR_KEY_EXISTS",eb)},e):C(t,[...ev,e],Z.object?{insertBefore:0}:{}).then(e=>{e&&eN({code:"ADD_ERROR",message:e},t)})}:void 0,handleDelete:eD?e3:void 0,enableClipboard:R,type:e1,nodeData:eb,translate:L,customButtons:n.customButtons,keyboardControls:$,handleKeyboard:G,getNewKeyOptions:eH,editConfirmRef:ee,jsonStringify:U}),ts={canEditKey:eL,isEditingKey:eI,pathString:ej,path:ev,name:eE,handleKeyboard:G,handleEditKey:eT,handleCancel:e9,keyValueArray:tn,styles:r("property",eb),getNextOrPrevious:e=>f(eb.fullData,ev,e,_),handleClick:et.includes("property")?e4:e=>e.stopPropagation(),emptyStringKey:eA},tc=t.jsxs("div",Object.assign({className:"jer-component jer-collection-component",style:Object.assign(Object.assign({marginLeft:(0===ev.length?0:M/2)+"em"},r("collection",eb)),{position:"relative"}),draggable:ek},eK,eP("above"),{children:[t.jsx("div",{className:"jer-clickzone",style:{width:M/2+1+"em",zIndex:10+2*eb.level},onClick:et.includes("left")?e4:void 0}),!eF&&eV,t.jsx(eM,{position:"above",nodeData:eb}),eq?t.jsxs("div",{className:"jer-collection-header-row",style:{position:"relative"},onClick:et.includes("header")?e4:void 0,children:[t.jsxs("div",{className:"jer-collection-name",children:[t.jsx("div",{className:"jer-collapse-icon jer-accordion-icon"+(em?" jer-rotate-90":""),style:{zIndex:11+2*eb.level,transition:ef},onClick:e4,children:t.jsx(X,{name:"chevron",rotate:em,nodeData:eb})}),te&&t.jsx(eo,Object.assign({},ts)),!eF&&t.jsx("span",{className:"jer-brackets jer-bracket-open",style:r("bracket",eb),children:e2.open})]}),!eF&&e6&&t.jsx("div",{className:"jer-collection-item-count"+(e6?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},r("itemCount",eb)),{transition:ef}),children:1===ex?L("ITEM_SINGLE",Object.assign(Object.assign({},eb),{size:1}),1):L("ITEMS_MULTIPLE",eb,ex)}),t.jsx("div",{className:"jer-brackets"+(ta?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},r("bracket",eb)),{transition:ef}),children:e2.close}),ti]}):eZ?t.jsx(t.Fragment,{}):t.jsxs("div",{className:"jer-collection-header-row",style:{position:"relative"},children:[t.jsx(eo,Object.assign({},ts)),ti]}),t.jsxs("div",{className:"jer-collection-inner",style:Object.assign(Object.assign({overflowY:ta||eg?"clip":"visible",maxHeight:e0?void 0:eh},r("collectionInner",eb)),{transition:ef}),ref:ep,children:[tl,t.jsx("div",{className:eF?"jer-collection-error-row":"jer-collection-error-row-edit",children:eO&&t.jsx("span",{className:"jer-error-slug",style:r("error",eb),children:eO})}),!eF&&eq&&t.jsx("div",{className:"jer-brackets jer-bracket-outside",style:Object.assign(Object.assign({},r("bracket",eb)),{marginLeft:(M<3?-1:M<6?-.5:0)+"em"}),children:e2.close})]}),t.jsx(eM,{position:"below",nodeData:eb})]}));return e$?t.jsx(e$,Object.assign({customNodeProps:eG},to,{children:tc})):tc},ep={ITEM_SINGLE:"{{count}} item",ITEMS_MULTIPLE:"{{count}} items",KEY_NEW:"Enter new key",KEY_SELECT:"Select key",NO_KEY_OPTIONS:"No key options",ERROR_KEY_EXISTS:"Key already exists",ERROR_INVALID_JSON:"Invalid JSON",ERROR_UPDATE:"Update unsuccessful",ERROR_DELETE:"Delete unsuccessful",ERROR_ADD:"Adding node unsuccessful",DEFAULT_STRING:"New data!",DEFAULT_NEW_KEY:"key",SHOW_LESS:"(Show less)",EMPTY_STRING:"<empty string>"},eg=(e,t)=>(n,r,a)=>((e,t,n,r,a)=>{if(t[r]){let e=t[r](n);if(null!==e)return e}let o=r in e?e[r]:ep[r];return void 0===a?o:null==o?void 0:o.replace("{{count}}",String(a))})(e,t,r,n,a);var eh=[],em=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",a=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(a){var l=eh.indexOf(o);-1===l&&(em[l=eh.push(o)-1]={}),n=em[l]&&em[l][r]?em[l][r]:em[l][r]=i()}else n=i();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function i(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),a=0;a<n.length;a++)e.setAttribute(n[a],t.attributes[n[a]]);var l="prepend"===r?"afterbegin":"beforeend";return o.insertAdjacentElement(l,e),e}}(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-select-inner{text-overflow:ellipsis;width:100%}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em;line-height:1.1em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em;width:100%}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word}.jer-string-expansion{cursor:pointer;filter:saturate(50%);opacity:.6}.jer-show-less{font-size:80%}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:.3s}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string{font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}',{});let ey=({data:n,setData:r,rootName:a="root",onUpdate:l=()=>{},onEdit:s=l,onDelete:c=l,onAdd:d=l,onChange:u,onError:g,showErrorMessages:m=!0,enableClipboard:f=!0,indent:j=2,collapse:b=!1,collapseAnimationTime:v=300,showCollectionCount:x=!0,restrictEdit:w=!1,restrictDelete:D=!1,restrictAdd:C=!1,restrictTypeSelection:O=!1,restrictDrag:S=!0,viewOnly:N,searchFilter:T,searchText:A,searchDebounceTime:R=350,keySort:P=!1,showArrayIndices:V=!0,showStringQuotes:M=!0,defaultValue:_=null,newKeyOptions:F,minWidth:I=250,maxWidth:z="min(600px, 90vw)",rootFontSize:L,stringTruncate:B=250,translations:W={},className:H,id:U,customText:Y={},customNodeDefinitions:$=[],customButtons:G=[],jsonParse:Z=JSON.parse,jsonStringify:J=(e,t)=>JSON.stringify(e,t,2),TextEditor:X,errorMessageTimeout:Q=2500,keyboardControls:q={},externalTriggers:ee,insertAtTop:et=!1,onCollapse:en,collapseClickZones:er=["header","left"]})=>{let{getStyles:ea}=k(),{setCurrentlyEditingElement:eo}=K(),ei=e.useMemo(()=>eb(b),[b]),es=e.useMemo(()=>eg(W,Y),[W,Y]),[ec,ep]=e.useState(A),[eh,em]=(({setData:t,data:n})=>{let[r,a]=e.useState(t?void 0:n),o=e.useCallback(e=>{t?t(e):a(e)},[t]);return e.useEffect(()=>{t||a(n)},[n]),[t?n:r,o]})({setData:r,data:n}),ey=e.useRef(null);e.useEffect(()=>{eo(null);let e=setTimeout(()=>ep(A),R);return()=>clearTimeout(e)},[A,R]);let ef={key:a,path:[],level:0,index:0,value:eh,size:"object"==typeof eh&&null!==eh?Object.keys(eh).length:1,parentData:null,fullData:eh},ew=(e,t)=>o(void 0,void 0,void 0,function*(){let n=yield e(t);if(!0===n||void 0===n)return void em(t.newData);let[r,a]=eE(n)?n:["error",n];if("error"===r)return em(t.currentData),!1===a?es("ERROR_UPDATE",ef):String(a);em(a)}),eD=e.useMemo(()=>eb(w,N),[w,N]),eC=e.useMemo(()=>eb(D,N),[D,N]),ek=e.useMemo(()=>eb(C,N),[C,N]),eO=e.useMemo(()=>eb(S,N),[S,N]),eS=e.useMemo(()=>ev(T),[T]),eN=e.useMemo(()=>(e=>{let t=Object.assign({},y);for(let n of Object.keys(y))if(e[n]){let r=e[n],a=["clipboardModifier","collapseModifier"].includes(n)?Array.isArray(r)?r:[r]:"string"==typeof r?{key:r}:r;t[n]=a,["stringConfirm","numberConfirm","booleanConfirm"].forEach(n=>{!e[n]&&e.confirm&&(t[n]=t.confirm)})}return t})(q),[q]),eT=e.useCallback((e,t)=>((e,t,n)=>{for(let[r,a]of Object.entries(t))if(h(n,e[r],r)){n.preventDefault(),a();break}})(eN,t,e),[eN]),eA=e.useMemo(()=>{let e=ex($,"stringifyReplacer");return t=>J(t,e)},[$,J]),eR=e.useMemo(()=>{let e=ex($,"parseReviver");return t=>E(Z(t,e))},[$,Z]),eK=e.useRef(null);((t,n)=>{let{setCurrentlyEditingElement:r,currentlyEditingElement:a,setCollapseState:o}=K();e.useEffect(()=>{if(!t)return;let{collapse:e,edit:l}=t;e&&o(e);let i=!(null==l?void 0:l.path)||p(l.path)===a;switch(null==l?void 0:l.action){case"accept":i&&(n.current&&n.current.click(),r(null));break;case"cancel":i&&r(null);break;default:(null==l?void 0:l.path)&&r(l.path)}},[t])})(ee,eK);let eP=e.useCallback((e,t)=>{!1!==P&&("function"!=typeof P?e.sort((e,n)=>{let r=t(e)[0],a=t(n)[0];return r<a?-1:r>a?1:0}):e.sort((e,n)=>P(t(e),t(n))))},[P]),eV=ed($,ef),eM={mainContainerRef:ey,name:a,nodeData:ef,onEdit:(e,t)=>o(void 0,void 0,void 0,function*(){let{currentData:n,newData:r,currentValue:a,newValue:o}=ej(eh,t,e,"update");if(a!==o)return yield ew(s,{currentData:n,newData:r,currentValue:a,newValue:o,name:t.slice(-1)[0],path:t})}),onDelete:(e,t)=>o(void 0,void 0,void 0,function*(){let{currentData:n,newData:r,currentValue:a,newValue:o}=ej(eh,t,e,"delete");return yield ew(c,{currentData:n,newData:r,currentValue:a,newValue:o,name:t.slice(-1)[0],path:t})}),onAdd:(e,t,n)=>o(void 0,void 0,void 0,function*(){let{currentData:r,newData:a,currentValue:o,newValue:l}=ej(eh,t,e,"add",n);return yield ew(d,{currentData:r,newData:a,currentValue:o,newValue:l,name:t.slice(-1)[0],path:t})}),onChange:u,onError:g,showErrorMessages:m,onMove:(e,t,n)=>o(void 0,void 0,void 0,function*(){if(null===e)return;let{currentData:r,newData:a,currentValue:o}=ej(eh,e,"","delete"),l=e.slice(-1)[0],i=t.slice(0,-1),c=t.slice(-1)[0],d="number"==typeof c?"above"===n?c:c+1:"number"==typeof l?`arr_${l}`:l;e.slice(0,-1).join(".")===t.slice(0,-1).join(".")&&"number"==typeof l&&"number"==typeof d&&l<d&&(d-=1);let u="number"==typeof d?{insert:!0}:"above"===n?{insertBefore:c}:{insertAfter:c},{newData:p,newValue:g}=ej(a,[...i,d],o,"add",u);return yield ew(s,{currentData:r,newData:p,currentValue:o,newValue:g,name:t.slice(-1)[0],path:t})}),showCollectionCount:x,collapseFilter:ei,collapseAnimationTime:v,restrictEditFilter:eD,restrictDeleteFilter:eC,restrictAddFilter:ek,restrictTypeSelection:O,restrictDragFilter:eO,canDragOnto:!1,searchFilter:eS,searchText:ec,enableClipboard:f,keySort:P,sort:eP,showArrayIndices:V,showStringQuotes:M,indent:j,defaultValue:_,newKeyOptions:F,stringTruncate:B,translate:es,customNodeDefinitions:$,customNodeData:eV,customButtons:G,parentData:null,jsonParse:eR,jsonStringify:eA,TextEditor:X,errorMessageTimeout:Q,handleKeyboard:eT,keyboardControls:eN,insertAtTop:{object:!0===et||"object"===et,array:!0===et||"array"===et},onCollapse:en,editConfirmRef:eK,collapseClickZones:er},e_=Object.assign(Object.assign({},ea("container",ef)),{minWidth:I,maxWidth:z});return e_.fontSize=null!=L?L:e_.fontSize,t.jsx("div",{id:U,ref:ey,className:`jer-editor-container ${null!=H?H:""}`,style:e_,children:i(eh)&&!eV.renderCollectionAsValue?t.jsx(eu,Object.assign({data:eh},eM)):t.jsx(el,Object.assign({data:eh,showLabel:!0},eM))})},ef=n=>{var r;let[a,o]=e.useState();return e.useEffect(()=>{o(document.documentElement)},[]),a?t.jsx(C,{theme:null!==(r=n.theme)&&void 0!==r?r:w,icons:n.icons,docRoot:a,children:t.jsx(R,{onEditEvent:n.onEditEvent,onCollapse:n.onCollapse,children:t.jsx(ey,Object.assign({},n))})}):null},ej=(e,t,a,o,l={})=>{if(0===t.length)return{currentData:e,newData:a,currentValue:e,newValue:a};let i=Object.assign({remove:"delete"===o},l),s="add"!==o?n(e,t):void 0;return{currentData:e,newData:r(e,t,a,i),currentValue:s,newValue:"delete"!==o?a:void 0}},eb=(e,t)=>t?()=>!0:"boolean"==typeof e?()=>e:"number"==typeof e?({level:t})=>t>=e:e,ev=e=>{if(void 0!==e)return"value"===e?d:"key"===e?u:"all"===e?(e,t)=>d(e,t)||u(e,t):e},eE=e=>Array.isArray(e)&&2===e.length&&["error","value"].includes(e[0]),ex=(e,t)=>{let n="stringifyReplacer"===t?[e=>void 0===e?x:e]:[];if(n.push(...e.map(e=>e[t]).filter(e=>!!e)),0!==n.length)return(e,t)=>{let r=t;for(let e of n)r=e(r);return r}},ew={displayName:"Github Dark",styles:{container:{backgroundColor:"#0d1117",color:"white"},dropZone:"rgba(165, 214, 255, 0.17)",property:"#E6EDF3",bracket:"#56d364",itemCount:"#8B949E",string:"#A5D6FF",number:"#D2A8FF",boolean:{color:"#FF7B72",fontSize:"90%",fontWeight:"bold"},null:"green",iconCollection:"#D2A8FF",iconEdit:"#D2A8FF",iconDelete:"rgb(203, 75, 22)",iconAdd:"rgb(203, 75, 22)",iconCopy:"#A5D6FF",iconOk:"#56d364",iconCancel:"rgb(203, 75, 22)"}},eD={displayName:"Github Light",styles:{container:"white",property:"#1F2328",bracket:"#00802e",itemCount:"#8B949E",string:"#0A3069",number:"#953800",boolean:{color:"#CF222E",fontSize:"90%",fontWeight:"bold"},null:"#FF7B72",iconCollection:"#8250DF",iconEdit:"#8250DF",iconDelete:"rgb(203, 75, 22)",iconAdd:"#8250DF",iconCopy:"#57606A"}};export{H as IconAdd,Z as IconCancel,J as IconChevron,$ as IconCopy,Y as IconDelete,U as IconEdit,G as IconOk,ef as JsonEditor,M as StringDisplay,_ as StringEdit,r as assign,w as defaultTheme,n as extract,ew as githubDarkTheme,eD as githubLightTheme,i as isCollection,d as matchNode,u as matchNodeKey,et as standardDataTypes,p as toPathString,L as useKeyboardListener};