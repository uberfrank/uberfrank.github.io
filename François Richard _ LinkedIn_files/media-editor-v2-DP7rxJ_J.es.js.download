import{reactExports as e,jsxRuntimeExports as i}from"./vendor-lLSPkHbo.es.js";import{MEDIA_EDITOR_VIEW as t,useSduiExpression as n,useSduiStore as a,useSduiState as o,CROP_RATIOS as s,filesWithEditDataToMediaList as l,useMediaImageEditor as r,getFileUrl as d,MediaImageEditorCanvas as m,MediaEditorToolbar as g,MediaFileManager as p,MediaEditorViewWrapper as C,MediaImageFilters as _,MediaAltTextEditor as c}from"./sdui-BL7iN1BZ.es.js";import{useI18n as x}from"./como-CS_DjxWm.es.js";import{Box as E,Image as j,Column as u,Button as y}from"./ui-JbpiC1KK.es.js";/* empty css                    */import"./delux-sortable-Cy6DrvLd.es.js";let f=Object.freeze(Object.defineProperty({__proto__:null,MediaEditorV2:function({input:f,editorConfig:I,outputMediaList:R,onComplete:h,tagEditor:A}={}){let[T,O]=e.useState(t.FILE_MANAGER),[b,N]=e.useState(0),F=n(f),v=n(I?.enableImageFilters),L=n(I?.enableImageAdjustmentSliders),{setValue:M}=a(),k=o(R?.key),{t:S}=x(),w=s[I?.supportedCropRatios?.[0]??"CropRatio_Original"]||s.CropRatio_Original,G=e.useCallback((e,i)=>{if(!F?.mediaFiles)return;let t=l([{file:e,editData:i}],!0);R?.key&&t&&M(R?.key,t)},[F,R?.key,M]),[D,B]=r(F?.mediaFiles?.[b],w,e.useCallback((e,i)=>{G(e,i),O(t.FILE_MANAGER)},[G])),K=k?.mediaFiles?.[b]??F?.mediaFiles?.[b],W=K?d(K):void 0;return i.jsxs(E,{display:"grid",style:{height:"100%",gridTemplateColumns:"3fr 2fr 0.5fr",gridTemplateRows:"1fr auto auto"},children:[i.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",style:{gridColumn:"1",gridRow:"1",overflow:"hidden"},children:T===t.IMAGE_EDITOR?i.jsx(m,{canvasKey:D.canvasKey,onReady:D.onReady,hasContentCredentials:D.hasContentCredentials,isImageEdited:D.isImageEdited,isContentCredentialsTooltipOpen:D.isContentCredentialsTooltipOpen,setIsContentCredentialsTooltipOpen:D.setIsContentCredentialsTooltipOpen,isContentCredentialsWarningOpen:D.isContentCredentialsWarningOpen,setIsContentCredentialsWarningOpen:D.setIsContentCredentialsWarningOpen}):i.jsx(j,{src:W,a11yText:S("media_editor_image_preview"),imageScalingType:"contain",width:"100%",height:"100%"})}),T===t.FILE_MANAGER&&i.jsx(E,{display:"flex",justifyContent:"center",style:{gridColumn:"1",gridRow:"2"},children:i.jsx(g,{activeView:T,onViewChange:O})}),i.jsx(E,{inset:"2x",display:"flex",flexDirection:"column",style:{gridColumn:"2",gridRow:"1 / 3",overflow:"auto"},children:i.jsxs(u,{gap:"2x",height:"100%",children:[T===t.FILE_MANAGER&&i.jsx(p,{input:F?.mediaFiles,selectedIndex:b,onSelectionChange:N}),T===t.IMAGE_EDITOR&&i.jsx(C,{title:S("media_editor_edit"),onBack:()=>O(t.FILE_MANAGER),children:i.jsx(_,{imageRef:D.imageRef,editData:D.editData,initialZoom:D.initialZoom,initialStraightenAngle:D.initialStraightenAngle,initialRotate:D.initialRotate,onEdit:D.onImageEdit,enableImageFilters:v,enableImageAdjustmentSliders:L,isImageEdited:D.isImageEdited,onApplyEdits:B})}),T===t.TAG_EDITOR&&i.jsx(C,{title:S("media_editor_add_tag"),onBack:()=>O(t.FILE_MANAGER),children:A}),T===t.ALT_TEXT_EDITOR&&i.jsx(C,{title:S("media_editor_add_alt_text"),onBack:()=>O(t.FILE_MANAGER),children:i.jsx(c,{})})]})}),i.jsx(E,{borderTop:"divider",insetX:"3x",insetY:"1.5x",tagName:"footer",justifyContent:"flexEnd",display:"flex",style:{gridColumn:"1 / 4",gridRow:"3"},children:i.jsx(y,{category:"primary",isEmphasized:!0,onClick:h,text:S("media_editor_save")})})]})}},Symbol.toStringTag,{value:"Module"}));export{f as CLIENT_COMPONENT_f2b4d044c030b948b6809a8941429c7a};